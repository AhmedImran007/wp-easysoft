(()=>{"use strict";const e=window.wp.blocks,s=window.wp.i18n,t=window.wp.blockEditor,a=window.wp.components,l=window.wp.data,r=window.wp.coreData,n=window.ReactJSXRuntime;(0,e.registerBlockType)("wp-easysoft/plugins-grid",{edit:function({attributes:e,setAttributes:i}){const{title:o,description:d,numberOfPosts:c,orderBy:m,order:p}=e,x=(0,t.useBlockProps)({className:"py-16 bg-white"}),h=(0,l.useSelect)(e=>e(r.store).getEntityRecords("postType","wp_plugin",{per_page:c,orderby:m,order:p,_embed:!0}),[c,m,p]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.InspectorControls,{children:(0,n.jsxs)(a.PanelBody,{title:(0,s.__)("Settings","wp-easysoft"),initialOpen:!0,children:[(0,n.jsx)(a.TextControl,{label:(0,s.__)("Title","wp-easysoft"),value:o,onChange:e=>i({title:e})}),(0,n.jsx)(a.TextControl,{label:(0,s.__)("Description","wp-easysoft"),value:d,onChange:e=>i({description:e})}),(0,n.jsx)(a.RangeControl,{label:(0,s.__)("Number of Plugins","wp-easysoft"),value:c,onChange:e=>i({numberOfPosts:e}),min:1,max:12}),(0,n.jsx)(a.SelectControl,{label:(0,s.__)("Order By","wp-easysoft"),value:m,options:[{label:(0,s.__)("Date","wp-easysoft"),value:"date"},{label:(0,s.__)("Title","wp-easysoft"),value:"title"},{label:(0,s.__)("Menu Order","wp-easysoft"),value:"menu_order"}],onChange:e=>i({orderBy:e})}),(0,n.jsx)(a.SelectControl,{label:(0,s.__)("Order","wp-easysoft"),value:p,options:[{label:(0,s.__)("Descending","wp-easysoft"),value:"desc"},{label:(0,s.__)("Ascending","wp-easysoft"),value:"asc"}],onChange:e=>i({order:e})})]})}),(0,n.jsx)("section",{...x,children:(0,n.jsxs)("div",{className:"container mx-auto px-4",children:[(0,n.jsx)(t.RichText,{tagName:"h2",className:"mb-4 text-center text-3xl font-bold md:text-4xl",value:o,onChange:e=>i({title:e}),placeholder:(0,s.__)("Our WordPress Plugins","wp-easysoft"),allowedFormats:[]}),(0,n.jsx)(t.RichText,{tagName:"p",className:"mx-auto mb-12 max-w-2xl text-center text-xl text-gray-600",value:d,onChange:e=>i({description:e}),placeholder:(0,s.__)("Enhance your site with lightweight, high-performance tools.","wp-easysoft"),allowedFormats:[]}),!h&&(0,n.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,n.jsx)(a.Spinner,{}),(0,n.jsx)("span",{className:"ml-2",children:(0,s.__)("Loading plugins...","wp-easysoft")})]}),h&&0===h.length&&(0,n.jsx)("div",{className:"py-8 text-center",children:(0,n.jsx)("p",{className:"text-gray-500",children:(0,s.__)("No plugins found. Add some plugins in the admin area.","wp-easysoft")})}),h&&h.length>0&&(0,n.jsx)("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:h.map(e=>(0,n.jsx)("div",{className:"plugin-card overflow-hidden rounded-xl border border-gray-100 bg-white shadow-md",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,n.jsx)("div",{className:"bg-primary-light rounded-lg p-3",children:e.featured_media?(0,n.jsx)("img",{src:e._embedded?.["wp:featuredmedia"]?.[0]?.source_url,alt:e.title.rendered,className:"h-8 w-8 object-contain"}):(0,n.jsx)("i",{className:"fas fa-plug text-primary text-2xl"})}),e.meta?.has_pro&&(0,n.jsx)("span",{className:"accent-light-bg accent-color rounded-full px-2 py-1 text-xs font-medium",children:(0,s.__)("PRO Available","wp-easysoft")})]}),(0,n.jsx)("h3",{className:"mb-2 text-xl font-bold",children:e.title.rendered}),(0,n.jsxs)("div",{className:"mb-3 flex items-center text-sm text-gray-500",children:[(0,n.jsx)("i",{className:"fas fa-download mr-1"}),(0,n.jsxs)("span",{children:[e.meta?.active_installs||"0"," ",(0,s.__)("Active Installs","wp-easysoft")]})]}),(0,n.jsx)("div",{className:"mb-6 text-gray-600",dangerouslySetInnerHTML:{__html:e.excerpt.rendered}}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("a",{href:e.link,className:"text-primary hover:text-primary-light font-medium transition",children:(0,s.__)("Learn More","wp-easysoft")}),e.meta?.free_version_url&&(0,n.jsx)("a",{href:e.meta.free_version_url,className:"font-medium text-gray-600 transition hover:text-gray-700",children:(0,s.__)("Free Version","wp-easysoft")})]})]})},e.id))})]})})]})},save:()=>null})})();